<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Cek Umur & Masa Aktif Kartu SIM</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --telkomsel: #e2001a;
            --tri: #ff6a00;
            --xl: #00a2e8;
            --indosat: #ff6600;
            --smartfren: #f5a623;
            --success: #2ecc71;
            --warning: #f39c12;
            --danger: #e74c3c;
            --light: #f8f9fa;
            --dark: #2c3e50;
            --gray: #7f8c8d;
            --border-radius: 12px;
            --box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f0f4f8 0%, #d9e2ec 100%);
            color: var(--dark);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(to right, var(--telkomsel), var(--tri), var(--xl), var(--indosat));
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .logo i {
            font-size: 3rem;
            background: linear-gradient(45deg, var(--telkomsel), var(--xl));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        h1 {
            color: var(--dark);
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, var(--telkomsel), var(--tri), var(--xl));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .subtitle {
            color: var(--gray);
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 30px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border-top: 4px solid transparent;
        }
        
        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }
        
        .card-telkomsel {
            border-top-color: var(--telkomsel);
        }
        
        .card-tri {
            border-top-color: var(--tri);
        }
        
        .card-xl {
            border-top-color: var(--xl);
        }
        
        .card-indosat {
            border-top-color: var(--indosat);
        }
        
        .card-title {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            font-size: 1.6rem;
            color: var(--dark);
        }
        
        .card-title i {
            font-size: 1.8rem;
        }
        
        .operator-selector {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 25px;
        }
        
        .operator-btn {
            padding: 12px 5px;
            border: 2px solid #e1e5eb;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            font-weight: 600;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        
        .operator-btn i {
            font-size: 1.5rem;
        }
        
        .operator-btn.active {
            border-color: currentColor;
            transform: scale(1.05);
        }
        
        .operator-telkomsel {
            color: var(--telkomsel);
        }
        
        .operator-tri {
            color: var(--tri);
        }
        
        .operator-xl {
            color: var(--xl);
        }
        
        .operator-indosat {
            color: var(--indosat);
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--dark);
            font-size: 1.1rem;
        }
        
        .input-with-icon {
            position: relative;
        }
        
        .input-with-icon i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
        }
        
        input, select {
            width: 100%;
            padding: 15px 15px 15px 45px;
            border: 2px solid #e1e5eb;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--xl);
        }
        
        button {
            background: linear-gradient(45deg, var(--telkomsel), var(--xl));
            color: white;
            border: none;
            border-radius: 10px;
            padding: 18px 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-top: 10px;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .result {
            margin-top: 30px;
            padding: 25px;
            border-radius: 10px;
            display: none;
            border-left: 5px solid transparent;
        }
        
        .result.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        .result-success {
            background-color: rgba(46, 204, 113, 0.1);
            border-left-color: var(--success);
        }
        
        .result-warning {
            background-color: rgba(243, 156, 18, 0.1);
            border-left-color: var(--warning);
        }
        
        .result-danger {
            background-color: rgba(231, 76, 60, 0.1);
            border-left-color: var(--danger);
        }
        
        .result-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }
        
        .result-title {
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .result-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .detail-item {
            background-color: rgba(255, 255, 255, 0.8);
            padding: 18px;
            border-radius: 8px;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .detail-label {
            font-size: 0.95rem;
            color: var(--gray);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .detail-value {
            font-weight: 700;
            font-size: 1.3rem;
        }
        
        .status-badge {
            display: inline-flex;
            align-items: center;
            padding: 8px 18px;
            border-radius: 25px;
            font-weight: 700;
            font-size: 1rem;
            gap: 8px;
        }
        
        .status-active {
            background-color: rgba(46, 204, 113, 0.2);
            color: #27ae60;
        }
        
        .status-warning {
            background-color: rgba(243, 156, 18, 0.2);
            color: #d35400;
        }
        
        .status-expired {
            background-color: rgba(231, 76, 60, 0.2);
            color: #c0392b;
        }
        
        .operator-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 25px;
        }
        
        .stat-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid #e9ecef;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        .history-card {
            grid-column: span 2;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        
        th {
            background: linear-gradient(45deg, var(--telkomsel), var(--xl));
            color: white;
            font-weight: 600;
            padding: 18px 15px;
            text-align: left;
        }
        
        td {
            padding: 18px 15px;
            border-bottom: 1px solid #e9ecef;
        }
        
        tr:hover {
            background-color: #f8f9fa;
        }
        
        .operator-cell {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
        }
        
        .no-data {
            text-align: center;
            padding: 50px 20px;
            color: var(--gray);
        }
        
        footer {
            text-align: center;
            padding: 25px;
            color: var(--gray);
            font-size: 0.95rem;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            margin-top: 30px;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .footer-links a {
            color: var(--xl);
            text-decoration: none;
            font-weight: 500;
        }
        
        .footer-links a:hover {
            text-decoration: underline;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @media (max-width: 1100px) {
            .history-card {
                grid-column: span 1;
            }
        }
        
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .operator-selector {
                grid-template-columns: repeat(2, 1fr);
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .logo {
                flex-direction: column;
                gap: 10px;
            }
            
            .result-details {
                grid-template-columns: 1fr;
            }
            
            .operator-stats {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            header {
                padding: 20px 15px;
            }
            
            .card {
                padding: 20px;
            }
            
            th, td {
                padding: 12px 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-sim-card"></i>
                <h1>Cek Umur & Masa Aktif Kartu SIM</h1>
            </div>
            <p class="subtitle">Periksa status keaktifan dan umur kartu SIM Anda. Cek apakah kartu SIM Telkomsel, Tri, XL Axiata, Indosat, atau operator lainnya masih aktif atau sudah kadaluarsa.</p>
        </header>
        
        <main class="dashboard">
            <!-- Kartu Pengecekan -->
            <div class="card card-telkomsel">
                <div class="card-title">
                    <i class="fas fa-search"></i>
                    <h2>Cek Status Kartu SIM</h2>
                </div>
                
                <div class="operator-selector">
                    <div class="operator-btn operator-telkomsel active" data-operator="telkomsel">
                        <i class="fas fa-bolt"></i>
                        <span>Telkomsel</span>
                    </div>
                    <div class="operator-btn operator-tri" data-operator="tri">
                        <i class="fas fa-fire"></i>
                        <span>Tri (3)</span>
                    </div>
                    <div class="operator-btn operator-xl" data-operator="xl">
                        <i class="fas fa-bolt"></i>
                        <span>XL Axiata</span>
                    </div>
                    <div class="operator-btn operator-indosat" data-operator="indosat">
                        <i class="fas fa-globe"></i>
                        <span>Indosat</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="phoneNumber"><i class="fas fa-mobile-alt"></i> Nomor Telepon</label>
                    <div class="input-with-icon">
                        <i class="fas fa-phone"></i>
                        <input type="text" id="phoneNumber" placeholder="Contoh: 081234567890" maxlength="15">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="registrationDate"><i class="far fa-calendar-alt"></i> Tanggal Aktivasi SIM</label>
                    <div class="input-with-icon">
                        <i class="fas fa-calendar"></i>
                        <input type="date" id="registrationDate">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="operator"><i class="fas fa-network-wired"></i> Operator</label>
                    <div class="input-with-icon">
                        <i class="fas fa-sim-card"></i>
                        <select id="operator">
                            <option value="telkomsel">Telkomsel (simPATI, Kartu AS, LOOP)</option>
                            <option value="tri">Tri (3)</option>
                            <option value="xl">XL Axiata</option>
                            <option value="indosat">Indosat (IM3, Mentari)</option>
                            <option value="smartfren">Smartfren</option>
                            <option value="axis">AXIS (sekarang XL)</option>
                            <option value="other">Operator Lainnya</option>
                        </select>
                    </div>
                </div>
                
                <button id="checkButton">
                    <i class="fas fa-check-circle"></i> Cek Status Kartu SIM
                </button>
                
                <!-- Hasil Pengecekan -->
                <div id="result" class="result">
                    <div class="result-header">
                        <div class="result-title">
                            <i class="fas fa-clipboard-check"></i>
                            <span id="resultTitle">Status Kartu SIM</span>
                        </div>
                        <div id="resultStatus" class="status-badge">-</div>
                    </div>
                    <p id="resultMessage">Hasil pengecekan akan muncul di sini.</p>
                    
                    <div class="result-details">
                        <div class="detail-item">
                            <div class="detail-label">
                                <i class="fas fa-phone"></i>
                                <span>Nomor Telepon</span>
                            </div>
                            <div class="detail-value" id="detailPhoneNumber">-</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">
                                <i class="fas fa-network-wired"></i>
                                <span>Operator</span>
                            </div>
                            <div class="detail-value" id="detailOperator">-</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">
                                <i class="fas fa-birthday-cake"></i>
                                <span>Umur Kartu</span>
                            </div>
                            <div class="detail-value" id="detailCardAge">-</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">
                                <i class="fas fa-clock"></i>
                                <span>Sisa Masa Aktif</span>
                            </div>
                            <div class="detail-value" id="detailRemainingTime">-</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Kartu Informasi Operator -->
            <div class="card card-xl">
                <div class="card-title">
                    <i class="fas fa-info-circle"></i>
                    <h2>Informasi Masa Tenggang</h2>
                </div>
                
                <div style="margin-bottom: 25px;">
                    <h3 style="margin-bottom: 15px; color: var(--dark);"><i class="fas fa-clock"></i> Masa Tenggang Operator</h3>
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                        <p>Setiap operator memiliki kebijakan masa tenggang (grace period) yang berbeda setelah kartu SIM tidak aktif:</p>
                        <ul style="margin-top: 15px; margin-left: 20px;">
                            <li><strong>Telkomsel:</strong> 90-180 hari masa tenggang</li>
                            <li><strong>Tri (3):</strong> 60-120 hari masa tenggang</li>
                            <li><strong>XL Axiata:</strong> 90-150 hari masa tenggang</li>
                            <li><strong>Indosat:</strong> 60-180 hari masa tenggang</li>
                            <li><strong>Smartfren:</strong> 30-90 hari masa tenggang</li>
                        </ul>
                    </div>
                </div>
                
                <div style="margin-bottom: 25px;">
                    <h3 style="margin-bottom: 15px; color: var(--dark);"><i class="fas fa-lightbulb"></i> Tips Menjaga Kartu Tetap Aktif</h3>
                    <div style="background: rgba(46, 204, 113, 0.1); padding: 20px; border-radius: 10px;">
                        <ul style="margin-left: 20px;">
                            <li>Lakukan aktivitas minimal 1x dalam 30-90 hari (tergantung operator)</li>
                            <li>Isi pulsa secara berkala</li>
                            <li>Lakukan panggilan, SMS, atau penggunaan data</li>
                            <li>Periksa status kartu secara berkala</li>
                            <li>Catat tanggal aktivasi kartu SIM Anda</li>
                        </ul>
                    </div>
                </div>
                
                <div class="operator-stats">
                    <div class="stat-card">
                        <div class="stat-value">78%</div>
                        <div class="stat-label">Kartu Masih Aktif</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">22%</div>
                        <div class="stat-label">Kartu Tidak Aktif</div>
                    </div>
                </div>
            </div>
            
            <!-- Kartu Riwayat -->
            <div class="card history-card card-indosat">
                <div class="card-title">
                    <i class="fas fa-history"></i>
                    <h2>Riwayat Pengecekan</h2>
                </div>
                
                <div class="table-container">
                    <table id="historyTable">
                        <thead>
                            <tr>
                                <th>Operator</th>
                                <th>Nomor</th>
                                <th>Aktivasi</th>
                                <th>Umur</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="historyBody">
                            <!-- Data riwayat akan dimasukkan oleh JavaScript -->
                        </tbody>
                    </table>
                    <div id="noHistory" class="no-data">
                        <i class="fas fa-history fa-3x" style="margin-bottom: 15px; color: #e1e5eb;"></i>
                        <p>Belum ada riwayat pengecekan. Lakukan pengecekan pertama Anda!</p>
                    </div>
                </div>
            </div>
        </main>
        
        <footer>
            <p>&copy; 2023 Dashboard Cek Umur & Masa Aktif Kartu SIM. Semua hak dilindungi.</p>
            <p>Alat ini untuk tujuan informasi saja. Untuk informasi resmi, hubungi layanan pelanggan operator Anda.</p>
            <div class="footer-links">
                <a href="#"><i class="fas fa-question-circle"></i> Bantuan</a>
                <a href="#"><i class="fas fa-shield-alt"></i> Kebijakan Privasi</a>
                <a href="#"><i class="fas fa-envelope"></i> Kontak</a>
                <a href="#"><i class="fas fa-redo"></i> Reset Data</a>
            </div>
        </footer>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Set tanggal maksimum untuk input tanggal (hari ini)
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('registrationDate').setAttribute('max', today);
            
            // Set tanggal default ke 1 tahun yang lalu
            const oneYearAgo = new Date();
            oneYearAgo.setFullYear(oneYearAgo.getFullYear() - 1);
            document.getElementById('registrationDate').value = oneYearAgo.toISOString().split('T')[0];
            
            // Set nomor telepon default
            document.getElementById('phoneNumber').value = '0812' + Math.floor(1000000 + Math.random() * 9000000);
            
            // Operator selector buttons
            const operatorButtons = document.querySelectorAll('.operator-btn');
            const operatorSelect = document.getElementById('operator');
            
            operatorButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    // Remove active class from all buttons
                    operatorButtons.forEach(b => b.classList.remove('active'));
                    
                    // Add active class to clicked button
                    this.classList.add('active');
                    
                    // Update select dropdown
                    const operator = this.getAttribute('data-operator');
                    operatorSelect.value = operator;
                });
            });
            
            // Inisialisasi riwayat dari localStorage atau data default
            let checkHistory = JSON.parse(localStorage.getItem('simCheckHistory')) || [
                {
                    phoneNumber: '081234567890',
                    operator: 'telkomsel',
                    registrationDate: '2021-08-15',
                    status: 'active'
                },
                {
                    phoneNumber: '089876543210',
                    operator: 'xl',
                    registrationDate: '2020-12-01',
                    status: 'warning'
                },
                {
                    phoneNumber: '088112233445',
                    operator: 'tri',
                    registrationDate: '2019-05-20',
                    status: 'expired'
                },
                {
                    phoneNumber: '081511223344',
                    operator: 'indosat',
                    registrationDate: '2022-03-10',
                    status: 'active'
                }
            ];
            
            // Tampilkan riwayat
            displayHistory(checkHistory);
            
            // Event listener untuk tombol cek
            document.getElementById('checkButton').addEventListener('click', function() {
                checkSIMStatus();
            });
            
            // Fungsi untuk mengecek status kartu SIM
            function checkSIMStatus() {
                const phoneNumber = document.getElementById('phoneNumber').value.trim();
                const registrationDate = document.getElementById('registrationDate').value;
                const operator = document.getElementById('operator').value;
                
                // Validasi input
                if (!phoneNumber || phoneNumber.length < 10 || phoneNumber.length > 15 || isNaN(phoneNumber)) {
                    alert('Harap masukkan nomor telepon yang valid (10-15 digit angka).');
                    return;
                }
                
                if (!registrationDate) {
                    alert('Harap pilih tanggal aktivasi kartu SIM.');
                    return;
                }
                
                // Validasi tanggal tidak lebih dari hari ini
                const selectedDate = new Date(registrationDate);
                const today = new Date();
                if (selectedDate > today) {
                    alert('Tanggal aktivasi tidak boleh lebih dari hari ini.');
                    return;
                }
                
                // Hitung umur kartu SIM
                const regDate = new Date(registrationDate);
                let cardAge = today.getFullYear() - regDate.getFullYear();
                const monthDiff = today.getMonth() - regDate.getMonth();
                
                if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < regDate.getDate())) {
                    cardAge--;
                }
                
                // Hitung bulan sejak aktivasi
                const totalMonths = (today.getFullYear() - regDate.getFullYear()) * 12 + (today.getMonth() - regDate.getMonth());
                
                // Tentukan masa aktif berdasarkan operator
                const gracePeriods = {
                    'telkomsel': { min: 90, max: 180 },
                    'tri': { min: 60, max: 120 },
                    'xl': { min: 90, max: 150 },
                    'indosat': { min: 60, max: 180 },
                    'smartfren': { min: 30, max: 90 },
                    'axis': { min: 60, max: 120 },
                    'other': { min: 60, max: 180 }
                };
                
                const gracePeriod = gracePeriods[operator] || gracePeriods['other'];
                const avgGracePeriod = Math.floor((gracePeriod.min + gracePeriod.max) / 2);
                
                // Tentukan status kartu
                let status, resultClass, statusClass, statusText, icon, message;
                let remainingDays = null;
                
                // Asumsi: Kartu dianggap tidak aktif jika tidak ada transaksi dalam 30 hari
                // Untuk simulasi, kita anggap kartu berisiko jika > 60 hari tanpa aktivitas
                const daysSinceActivation = Math.floor((today - regDate) / (1000 * 60 * 60 * 24));
                const riskThreshold = 60;
                
                if (daysSinceActivation < 30) {
                    // Kartu baru
                    status = 'active';
                    statusClass = 'status-active';
                    statusText = 'Aktif';
                    resultClass = 'result-success';
                    icon = 'fas fa-check-circle';
                    message = `Kartu SIM ${getOperatorName(operator)} Anda masih aktif.`;
                    remainingDays = avgGracePeriod - daysSinceActivation;
                } else if (daysSinceActivation < avgGracePeriod) {
                    // Kartu masih dalam masa tenggang
                    status = 'warning';
                    statusClass = 'status-warning';
                    statusText = 'Perhatian';
                    resultClass = 'result-warning';
                    icon = 'fas fa-exclamation-triangle';
                    remainingDays = avgGracePeriod - daysSinceActivation;
                    message = `Kartu SIM ${getOperatorName(operator)} Anda masih aktif, namun perlu diperhatikan. Lakukan aktivitas segera.`;
                } else {
                    // Kartu sudah kadaluarsa
                    status = 'expired';
                    statusClass = 'status-expired';
                    statusText = 'Kadaluarsa';
                    resultClass = 'result-danger';
                    icon = 'fas fa-times-circle';
                    message = `Kartu SIM ${getOperatorName(operator)} Anda telah kadaluarsa. Nomor mungkin sudah diblokir oleh operator.`;
                }
                
                // Tampilkan hasil
                const resultDiv = document.getElementById('result');
                resultDiv.className = `result active ${resultClass}`;
                
                // Format nomor telepon untuk ditampilkan
                const formattedPhoneNumber = formatPhoneNumber(phoneNumber);
                
                // Update konten hasil
                document.getElementById('resultTitle').textContent = `Status: ${getOperatorName(operator)}`;
                document.getElementById('resultTitle').innerHTML = `<i class="${icon}"></i> Status: ${getOperatorName(operator)}`;
                
                document.getElementById('resultStatus').textContent = statusText;
                document.getElementById('resultStatus').className = `status-badge ${statusClass}`;
                
                // Update pesan detail
                if (remainingDays !== null && remainingDays > 0) {
                    message += ` Estimasi sisa masa aktif: ${remainingDays} hari.`;
                }
                
                document.getElementById('resultMessage').textContent = message;
                
                // Update detail
                document.getElementById('detailPhoneNumber').textContent = formattedPhoneNumber;
                document.getElementById('detailOperator').textContent = getOperatorName(operator);
                document.getElementById('detailCardAge').textContent = `${cardAge} Tahun ${totalMonths % 12} Bulan`;
                
                // Hitung sisa masa aktif
                if (remainingDays && remainingDays > 0) {
                    const remainingMonths = Math.floor(remainingDays / 30);
                    const remainingDaysMod = remainingDays % 30;
                    document.getElementById('detailRemainingTime').textContent = `${remainingMonths} Bulan ${remainingDaysMod} Hari`;
                } else if (remainingDays !== null && remainingDays <= 0) {
                    document.getElementById('detailRemainingTime').textContent = "Kadaluarsa";
                } else {
                    document.getElementById('detailRemainingTime').textContent = "Tidak diketahui";
                }
                
                // Tambahkan ke riwayat
                const newCheck = {
                    phoneNumber: phoneNumber,
                    operator: operator,
                    registrationDate: registrationDate,
                    status: status
                };
                
                checkHistory.unshift(newCheck);
                
                // Simpan ke localStorage (maksimal 15 entri)
                if (checkHistory.length > 15) {
                    checkHistory = checkHistory.slice(0, 15);
                }
                
                localStorage.setItem('simCheckHistory', JSON.stringify(checkHistory));
                
                // Perbarui tampilan riwayat
                displayHistory(checkHistory);
            }
            
            // Fungsi untuk mendapatkan nama operator yang lebih baik
            function getOperatorName(operatorCode) {
                const operatorNames = {
                    'telkomsel': 'Telkomsel',
                    'tri': 'Tri (3)',
                    'xl': 'XL Axiata',
                    'indosat': 'Indosat',
                    'smartfren': 'Smartfren',
                    'axis': 'AXIS',
                    'other': 'Lainnya'
                };
                
                return operatorNames[operatorCode] || 'Operator';
            }
            
            // Fungsi untuk memformat nomor telepon
            function formatPhoneNumber(phone) {
                // Format: 0812-3456-7890
                if (phone.length >= 10) {
                    return phone.replace(/(\d{4})(\d{4})(\d{0,})/, '$1-$2-$3');
                }
                return phone;
            }
            
            // Fungsi untuk menampilkan riwayat
            function displayHistory(history) {
                const historyBody = document.getElementById('historyBody');
                const noHistory = document.getElementById('noHistory');
                
                if (history.length === 0) {
                    historyBody.innerHTML = '';
                    noHistory.style.display = 'block';
                    return;
                }
                
                noHistory.style.display = 'none';
                historyBody.innerHTML = '';
                
                history.forEach(item => {
                    const row = document.createElement('tr');
                    
                    // Hitung umur kartu
                    const regDate = new Date(item.registrationDate);
                    const today = new Date();
                    let cardAge = today.getFullYear() - regDate.getFullYear();
                    const monthDiff = today.getMonth() - regDate.getMonth();
                    
                    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < regDate.getDate())) {
                        cardAge--;
                    }
                    
                    // Format nomor telepon
                    const formattedPhone = formatPhoneNumber(item.phoneNumber).substring(0, 10) + '...';
                    
                    // Format tanggal
                    const formattedDate = new Date(item.registrationDate).toLocaleDateString('id-ID', {
                        day: '2-digit',
                        month: 'short',
                        year: 'numeric'
                    });
                    
                    // Tentukan status dan kelas
                    let statusText, statusClass;
                    if (item.status === 'active') {
                        statusText = 'Aktif';
                        statusClass = 'status-active';
                    } else if (item.status === 'warning') {
                        statusText = 'Perhatian';
                        statusClass = 'status-warning';
                    } else {
                        statusText = 'Kadaluarsa';
                        statusClass = 'status-expired';
                    }
                    
                    // Tentukan ikon operator
                    let operatorIcon, operatorColor;
                    switch(item.operator) {
                        case 'telkomsel':
                            operatorIcon = 'fas fa-bolt';
                            operatorColor = 'var(--telkomsel)';
                            break;
                        case 'tri':
                            operatorIcon = 'fas fa-fire';
                            operatorColor = 'var(--tri)';
                            break;
                        case 'xl':
                            operatorIcon = 'fas fa-bolt';
                            operatorColor = 'var(--xl)';
                            break;
                        case 'indosat':
                            operatorIcon = 'fas fa-globe';
                            operatorColor = 'var(--indosat)';
                            break;
                        default:
                            operatorIcon = 'fas fa-sim-card';
                            operatorColor = 'var(--gray)';
                    }
                    
                    row.innerHTML = `
                        <td>
                            <div class="operator-cell">
                                <i class="${operatorIcon}" style="color: ${operatorColor}"></i>
                                <span>${getOperatorName(item.operator)}</span>
                            </div>
                        </td>
                        <td>${formattedPhone}</td>
                        <td>${formattedDate}</td>
                        <td>${cardAge} Tahun</td>
                        <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                    `;
                    
                    historyBody.appendChild(row);
                });
            }
            
            // Lakukan pengecekan otomatis saat halaman dimuat
            setTimeout(checkSIMStatus, 800);
        });
    </script>
</body>
</html>